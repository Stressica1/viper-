# ðŸš€ VIPER Trading Bot - Optimized Redis Configuration
# High-performance caching for algorithmic trading system

# ==================== GENERAL ====================
bind 0.0.0.0
port 6379
timeout 300
tcp-backlog 128
tcp-keepalive 300

# ==================== MEMORY MANAGEMENT ====================
# Maximum memory usage (512MB for trading system)
maxmemory 512mb
maxmemory-policy allkeys-lru

# ==================== SNAPSHOTS ====================
# Disable RDB snapshots for pure caching (AOF is sufficient)
save ""

# ==================== APPEND ONLY FILE ====================
# Enable AOF for data persistence
appendonly yes
appendfilename "appendonly.aof"
appendfsync everysec
no-appendfsync-on-rewrite no

# ==================== LOGGING ====================
loglevel notice
logfile ""

# ==================== PERFORMANCE TUNING ====================
# Disable dangerous commands
rename-command FLUSHDB ""
rename-command FLUSHALL ""
rename-command SHUTDOWN SHUTDOWN_REDIS

# Connection settings
maxclients 1000
databases 16

# ==================== LATENCY MONITORING ====================
latency-monitor-threshold 100

# ==================== TRADING-SPECIFIC OPTIMIZATIONS ====================
# Pub/Sub optimizations for real-time data
repl-disable-tcp-nodelay no

# ==================== CACHE OPTIMIZATIONS ====================
# Hash table size optimization
hash-max-ziplist-entries 512
hash-max-ziplist-value 64

# List optimizations
list-max-ziplist-size -2
list-compress-depth 0

# Set optimizations
set-max-intset-entries 512

# ZSet optimizations
zset-max-ziplist-entries 128
zset-max-ziplist-value 64

# ==================== TRADING SYSTEM SPECIFIC ====================
# VIPER strategy data often has patterns - enable optimizations
activerehashing yes

# ==================== MONITORING ====================
# Enable Redis slow log
slowlog-log-slower-than 10000
slowlog-max-len 128

# ==================== SECURITY ====================
# Protected mode for containerized environment
protected-mode no

# ==================== LUA SCRIPTING ====================
# Enable Lua scripting for complex trading calculations
lua-time-limit 5000
